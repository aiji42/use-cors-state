{"version":3,"sources":["App.js","index.js","../../node_modules/post-robot/dist/post-robot.js","../../node_modules/post-robot/index.js","../../src/index.tsx"],"names":["App","targetWindow","useCorsState","window","state","setState","type","value","onChange","e","target","parent","iframe","document","createElement","src","body","appendChild","ReactDOM","render","contentWindow","getElementById","self","module","modules","installedModules","__webpack_require__","moduleId","exports","i","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","t","mode","__esModule","ns","create","key","bind","n","default","object","property","hasOwnProperty","p","s","__webpack_exports__","isRegex","item","toString","promise_ZalgoPromise","src_types_TYPES_0","window_ProxyWindow","setup","destroy","setup_serializeMessage","setup_deserializeMessage","createProxyWindow","setup_toProxyWindow","on_on","on_once","send_send","markWindowKnown","cleanUpWindow","IE_WIN_ACCESS_ERROR","isAboutProtocol","win","location","protocol","getParent","err","getOpener","opener","canReadFromWindow","getActualDomain","Error","host","getDomain","domain","mockDomain","indexOf","isSameDomain","desc","getOwnPropertyDescriptor","assertSameDomain","isAncestorParent","child","childParent","result","push","getFrames","frames","len","length","frame","_i","_frame","iframeWindows","iframeFrames","isWindowClosed","allowMock","closed","message","mockclosed","top","iframeIndex","collection","parentNode","doc","ownerDocument","documentElement","contains","getAncestor","matchDomain","pattern","origin","Array","isArray","Boolean","match","JSON","stringify","some","subpattern","isWindow","obj","Window","__cross_domain_utils_window_check__","closeWindow","close","utils_isPromise","Promise","constructor","_toString","then","flushPromise","dispatchedErrors","possiblyUnhandledPromiseHandlers","activeCount","flushActive","promise","resolve","startActive","endActive","ZalgoPromise","handler","_this","this","resolved","rejected","errorHandled","error","handlers","dispatching","stack","_result","_error","isAsync","res","reject","_proto","prototype","dispatch","_this2","_err","setTimeout","j","asyncReject","chain","firstPromise","secondPromise","_handlers$i","onSuccess","onError","_result2","catch","finally","onFinally","try","timeout","time","_this3","clearTimeout","toPromise","TypeError","all","promises","count","results","prom","hash","keys","map","items","method","onPossiblyUnhandledException","cancel","splice","context","args","apply","delay","_delay","isPromise","flush","Zalgo","_extends","assign","arguments","source","util_safeIndexOf","objectIDs","weakmap_CrossDomainSafeWeakMap","CrossDomainSafeWeakMap","weakmap","values","Math","random","WeakMap","freeze","testWeakMap","testKey","set","_cleanupClosedWindows","delete","isSafeToReadWrite","entry","writable","index","has","getOrSet","uniqueID","chars","replace","charAt","floor","str","btoa","encodeURIComponent","p1","String","fromCharCode","parseInt","Buffer","from","Date","toISOString","slice","toLowerCase","serializeArgs","subkey","val","uid","memoizePromise","fn","cache","memoizedPromiseFunction","_arguments","_len2","_key2","reset","__name__","displayName","src_util_noop","stringifyError","level","newErr","util_isRegex","util_getOrSet","global_getGlobal","__post_robot_10_0_37__","getObj","globalStore","defStore","store","storeKey","defVal","del","_SERIALIZER","WildCard","getWildcard","global","WINDOW_WILDCARD","windowStore","winStore","getStore","getInstanceID","resolveHelloPromise","_ref","helloPromises","existingPromise","newPromise","sayHello","_ref4","send","instanceID","_ref5","data","getWindowInstanceID","_ref6","_ref7","isSerializedType","__type__","determineType","serializeType","__val__","_DESERIALIZER","SERIALIZER","function","code","regex","date","toJSON","array","string","number","boolean","null","defaultSerializers","DESERIALIZER","_ref2","RegExp","defaultDeserializers","cleanupProxyWindows","idToProxyWindow","_i2","_idToProxyWindow$keys2","id","shouldClean","getSerializedWindow","winPromise","_ref$id","windowNamePromise","windowTypePromise","getType","getName","focus","isClosed","setLocation","href","setName","sameDomain","frameElement","_i21","_document$querySelect2","querySelectorAll","setAttribute","interval","setInterval","clearInterval","ProxyWindow","serializedWindow","isProxyWindow","actualWindow","actualWindowPromise","getID","setWindow","isPopup","_this4","isPopupPromise","getNamePromise","reopenPromise","_ref3","open","focusPromise","getWindow","awaitWindow","matchWindow","_this5","proxyInstanceID","knownWindowInstanceID","unwrap","serialize","toProxyWindow","deserialize","_ref8","_ref9","addMethod","methodStore","proxyWindowMethods","lookupMethod","function_serializeFunction","destination","on","meth","methodSource","arg","join","__id__","serializeMessage","_serialize","serializers","serializer","deserializeMessage","_deserialize","deserializers","parse","deserializer","cross_domain_zalgo_promise","serializedPromise","cross_domain_function","serializedFunction","getDeserializedFunction","opts","crossDomainFunctionWrapper","options","fireAndForget","_args","__origin__","__source__","cross_domain_window","_RECEIVE_MESSAGE_TYPE","SEND_MESSAGE_STRATEGIES","send_sendMessage","_serializeMessage","serializedMessage","strategies","errors","strategyName","getResponseListener","deleteResponseListener","isResponseListenerErrored","getRequestListener","requestListeners","_i4","winQualifier","nameListeners","domainListeners","__domain_regex__","_i6","_domainListeners$__DO2","_domainListeners$__DO3","listener","postrobot_post_message","dom","forEach","postMessage","RECEIVE_MESSAGE_TYPES","postrobot_message_request","logName","sendResponse","ack","response","pathname","handleError","postrobot_message_ack","postrobot_message_response","receive_receiveMessage","event","receivedMessages","parsedMessage","requestListener","addRequestListener","listenersCollection","_i8","_win2","_i10","_listenersCollection","_i12","_domain2","_i14","existingListener","regexListeners","regexListener","strDomain","errorHandler","responseTimeout","childTimeout","actualParent","_i7","_getAllChildFrames4","getAllChildFrames","_i3","_getFrames2","_i5","_getAllChildFrames2","_i15","_getFrames8","_temp","targetDomain","actualDomain","normalizedDomain","responseListener","reqPromises","totalAckTimeout","totalResTimeout","ackTimeout","resTimeout","loop","cancelled","max","initialized","receiveMessage","sourceElement","originalEvent","addEventListener","removeEventListener","responseListeners","_responseListeners$ke2","_requestPromises$get2","require$$0","synchronizingKey","targetOrigin","initialValue","sendable","literner","postRobot","current"],"mappings":"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","file":"static/js/main.476cb49b.chunk.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useCorsState } from 'use-cors-state'\n\nconst App = ({ targetWindow }) => {\n  const [state, setState] = useCorsState('example', { window: targetWindow }, '')\n  return (\n    <div>\n      <input type='text' value={state} onChange={(e) => setState(e.target.value)} />\n      <p>Synchronized!!: {state}</p>\n    </div>\n  )\n}\n\nApp.propTypes = {\n  targetWindow: PropTypes.object.isRequired\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\nimport App from './App'\n\nif (window.parent === window) {\n  const iframe = document.createElement('iframe')\n  iframe.src = '/use-cors-state/'\n  document.body.appendChild(iframe)\n  ReactDOM.render(<App targetWindow={iframe.contentWindow} />, document.getElementById('root'))\n} else {\n  ReactDOM.render(<App targetWindow={window.parent} />, document.getElementById('root'))\n}\n","!function(root, factory) {\n    \"object\" == typeof exports && \"object\" == typeof module ? module.exports = factory() : \"function\" == typeof define && define.amd ? define(\"postRobot\", [], factory) : \"object\" == typeof exports ? exports.postRobot = factory() : root.postRobot = factory();\n}(\"undefined\" != typeof self ? self : this, (function() {\n    return function(modules) {\n        var installedModules = {};\n        function __webpack_require__(moduleId) {\n            if (installedModules[moduleId]) return installedModules[moduleId].exports;\n            var module = installedModules[moduleId] = {\n                i: moduleId,\n                l: !1,\n                exports: {}\n            };\n            modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n            module.l = !0;\n            return module.exports;\n        }\n        __webpack_require__.m = modules;\n        __webpack_require__.c = installedModules;\n        __webpack_require__.d = function(exports, name, getter) {\n            __webpack_require__.o(exports, name) || Object.defineProperty(exports, name, {\n                enumerable: !0,\n                get: getter\n            });\n        };\n        __webpack_require__.r = function(exports) {\n            \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(exports, Symbol.toStringTag, {\n                value: \"Module\"\n            });\n            Object.defineProperty(exports, \"__esModule\", {\n                value: !0\n            });\n        };\n        __webpack_require__.t = function(value, mode) {\n            1 & mode && (value = __webpack_require__(value));\n            if (8 & mode) return value;\n            if (4 & mode && \"object\" == typeof value && value && value.__esModule) return value;\n            var ns = Object.create(null);\n            __webpack_require__.r(ns);\n            Object.defineProperty(ns, \"default\", {\n                enumerable: !0,\n                value: value\n            });\n            if (2 & mode && \"string\" != typeof value) for (var key in value) __webpack_require__.d(ns, key, function(key) {\n                return value[key];\n            }.bind(null, key));\n            return ns;\n        };\n        __webpack_require__.n = function(module) {\n            var getter = module && module.__esModule ? function() {\n                return module.default;\n            } : function() {\n                return module;\n            };\n            __webpack_require__.d(getter, \"a\", getter);\n            return getter;\n        };\n        __webpack_require__.o = function(object, property) {\n            return {}.hasOwnProperty.call(object, property);\n        };\n        __webpack_require__.p = \"\";\n        return __webpack_require__(__webpack_require__.s = 0);\n    }([ function(module, __webpack_exports__, __webpack_require__) {\n        \"use strict\";\n        __webpack_require__.r(__webpack_exports__);\n        __webpack_require__.d(__webpack_exports__, \"Promise\", (function() {\n            return promise_ZalgoPromise;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"TYPES\", (function() {\n            return src_types_TYPES_0;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"ProxyWindow\", (function() {\n            return window_ProxyWindow;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"setup\", (function() {\n            return setup;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"destroy\", (function() {\n            return destroy;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"serializeMessage\", (function() {\n            return setup_serializeMessage;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"deserializeMessage\", (function() {\n            return setup_deserializeMessage;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"createProxyWindow\", (function() {\n            return createProxyWindow;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"toProxyWindow\", (function() {\n            return setup_toProxyWindow;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"on\", (function() {\n            return on_on;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"once\", (function() {\n            return on_once;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"send\", (function() {\n            return send_send;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"markWindowKnown\", (function() {\n            return markWindowKnown;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"cleanUpWindow\", (function() {\n            return cleanUpWindow;\n        }));\n        __webpack_require__.d(__webpack_exports__, \"bridge\", (function() {}));\n        function isRegex(item) {\n            return \"[object RegExp]\" === {}.toString.call(item);\n        }\n        var IE_WIN_ACCESS_ERROR = \"Call was rejected by callee.\\r\\n\";\n        function isAboutProtocol(win) {\n            void 0 === win && (win = window);\n            return \"about:\" === win.location.protocol;\n        }\n        function getParent(win) {\n            void 0 === win && (win = window);\n            if (win) try {\n                if (win.parent && win.parent !== win) return win.parent;\n            } catch (err) {}\n        }\n        function getOpener(win) {\n            void 0 === win && (win = window);\n            if (win && !getParent(win)) try {\n                return win.opener;\n            } catch (err) {}\n        }\n        function canReadFromWindow(win) {\n            try {\n                return !0;\n            } catch (err) {}\n            return !1;\n        }\n        function getActualDomain(win) {\n            void 0 === win && (win = window);\n            var location = win.location;\n            if (!location) throw new Error(\"Can not read window location\");\n            var protocol = location.protocol;\n            if (!protocol) throw new Error(\"Can not read window protocol\");\n            if (\"file:\" === protocol) return \"file://\";\n            if (\"about:\" === protocol) {\n                var parent = getParent(win);\n                return parent && canReadFromWindow() ? getActualDomain(parent) : \"about://\";\n            }\n            var host = location.host;\n            if (!host) throw new Error(\"Can not read window host\");\n            return protocol + \"//\" + host;\n        }\n        function getDomain(win) {\n            void 0 === win && (win = window);\n            var domain = getActualDomain(win);\n            return domain && win.mockDomain && 0 === win.mockDomain.indexOf(\"mock:\") ? win.mockDomain : domain;\n        }\n        function isSameDomain(win) {\n            if (!function(win) {\n                try {\n                    if (win === window) return !0;\n                } catch (err) {}\n                try {\n                    var desc = Object.getOwnPropertyDescriptor(win, \"location\");\n                    if (desc && !1 === desc.enumerable) return !1;\n                } catch (err) {}\n                try {\n                    if (isAboutProtocol(win) && canReadFromWindow()) return !0;\n                } catch (err) {}\n                try {\n                    if (getActualDomain(win) === getActualDomain(window)) return !0;\n                } catch (err) {}\n                return !1;\n            }(win)) return !1;\n            try {\n                if (win === window) return !0;\n                if (isAboutProtocol(win) && canReadFromWindow()) return !0;\n                if (getDomain(window) === getDomain(win)) return !0;\n            } catch (err) {}\n            return !1;\n        }\n        function assertSameDomain(win) {\n            if (!isSameDomain(win)) throw new Error(\"Expected window to be same domain\");\n            return win;\n        }\n        function isAncestorParent(parent, child) {\n            if (!parent || !child) return !1;\n            var childParent = getParent(child);\n            return childParent ? childParent === parent : -1 !== function(win) {\n                var result = [];\n                try {\n                    for (;win.parent !== win; ) {\n                        result.push(win.parent);\n                        win = win.parent;\n                    }\n                } catch (err) {}\n                return result;\n            }(child).indexOf(parent);\n        }\n        function getFrames(win) {\n            var result = [];\n            var frames;\n            try {\n                frames = win.frames;\n            } catch (err) {\n                frames = win;\n            }\n            var len;\n            try {\n                len = frames.length;\n            } catch (err) {}\n            if (0 === len) return result;\n            if (len) {\n                for (var i = 0; i < len; i++) {\n                    var frame = void 0;\n                    try {\n                        frame = frames[i];\n                    } catch (err) {\n                        continue;\n                    }\n                    result.push(frame);\n                }\n                return result;\n            }\n            for (var _i = 0; _i < 100; _i++) {\n                var _frame = void 0;\n                try {\n                    _frame = frames[_i];\n                } catch (err) {\n                    return result;\n                }\n                if (!_frame) return result;\n                result.push(_frame);\n            }\n            return result;\n        }\n        var iframeWindows = [];\n        var iframeFrames = [];\n        function isWindowClosed(win, allowMock) {\n            void 0 === allowMock && (allowMock = !0);\n            try {\n                if (win === window) return !1;\n            } catch (err) {\n                return !0;\n            }\n            try {\n                if (!win) return !0;\n            } catch (err) {\n                return !0;\n            }\n            try {\n                if (win.closed) return !0;\n            } catch (err) {\n                return !err || err.message !== IE_WIN_ACCESS_ERROR;\n            }\n            if (allowMock && isSameDomain(win)) try {\n                if (win.mockclosed) return !0;\n            } catch (err) {}\n            try {\n                if (!win.parent || !win.top) return !0;\n            } catch (err) {}\n            var iframeIndex = function(collection, item) {\n                for (var i = 0; i < collection.length; i++) try {\n                    if (collection[i] === item) return i;\n                } catch (err) {}\n                return -1;\n            }(iframeWindows, win);\n            if (-1 !== iframeIndex) {\n                var frame = iframeFrames[iframeIndex];\n                if (frame && function(frame) {\n                    if (!frame.contentWindow) return !0;\n                    if (!frame.parentNode) return !0;\n                    var doc = frame.ownerDocument;\n                    if (doc && doc.documentElement && !doc.documentElement.contains(frame)) {\n                        var parent = frame;\n                        for (;parent.parentNode && parent.parentNode !== parent; ) parent = parent.parentNode;\n                        if (!parent.host || !doc.documentElement.contains(parent.host)) return !0;\n                    }\n                    return !1;\n                }(frame)) return !0;\n            }\n            return !1;\n        }\n        function getAncestor(win) {\n            void 0 === win && (win = window);\n            return getOpener(win = win || window) || getParent(win) || void 0;\n        }\n        function matchDomain(pattern, origin) {\n            if (\"string\" == typeof pattern) {\n                if (\"string\" == typeof origin) return \"*\" === pattern || origin === pattern;\n                if (isRegex(origin)) return !1;\n                if (Array.isArray(origin)) return !1;\n            }\n            return isRegex(pattern) ? isRegex(origin) ? pattern.toString() === origin.toString() : !Array.isArray(origin) && Boolean(origin.match(pattern)) : !!Array.isArray(pattern) && (Array.isArray(origin) ? JSON.stringify(pattern) === JSON.stringify(origin) : !isRegex(origin) && pattern.some((function(subpattern) {\n                return matchDomain(subpattern, origin);\n            })));\n        }\n        function isWindow(obj) {\n            try {\n                if (obj === window) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (\"[object Window]\" === {}.toString.call(obj)) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (window.Window && obj instanceof window.Window) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && obj.self === obj) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && obj.parent === obj) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && obj.top === obj) return !0;\n            } catch (err) {\n                if (err && err.message === IE_WIN_ACCESS_ERROR) return !0;\n            }\n            try {\n                if (obj && \"__unlikely_value__\" === obj.__cross_domain_utils_window_check__) return !1;\n            } catch (err) {\n                return !0;\n            }\n            try {\n                if (\"postMessage\" in obj && \"self\" in obj && \"location\" in obj) return !0;\n            } catch (err) {}\n            return !1;\n        }\n        function closeWindow(win) {\n            try {\n                win.close();\n            } catch (err) {}\n        }\n        function utils_isPromise(item) {\n            try {\n                if (!item) return !1;\n                if (\"undefined\" != typeof Promise && item instanceof Promise) return !0;\n                if (\"undefined\" != typeof window && \"function\" == typeof window.Window && item instanceof window.Window) return !1;\n                if (\"undefined\" != typeof window && \"function\" == typeof window.constructor && item instanceof window.constructor) return !1;\n                var _toString = {}.toString;\n                if (_toString) {\n                    var name = _toString.call(item);\n                    if (\"[object Window]\" === name || \"[object global]\" === name || \"[object DOMWindow]\" === name) return !1;\n                }\n                if (\"function\" == typeof item.then) return !0;\n            } catch (err) {\n                return !1;\n            }\n            return !1;\n        }\n        var dispatchedErrors = [];\n        var possiblyUnhandledPromiseHandlers = [];\n        var activeCount = 0;\n        var flushPromise;\n        function flushActive() {\n            if (!activeCount && flushPromise) {\n                var promise = flushPromise;\n                flushPromise = null;\n                promise.resolve();\n            }\n        }\n        function startActive() {\n            activeCount += 1;\n        }\n        function endActive() {\n            activeCount -= 1;\n            flushActive();\n        }\n        var promise_ZalgoPromise = function() {\n            function ZalgoPromise(handler) {\n                var _this = this;\n                this.resolved = void 0;\n                this.rejected = void 0;\n                this.errorHandled = void 0;\n                this.value = void 0;\n                this.error = void 0;\n                this.handlers = void 0;\n                this.dispatching = void 0;\n                this.stack = void 0;\n                this.resolved = !1;\n                this.rejected = !1;\n                this.errorHandled = !1;\n                this.handlers = [];\n                if (handler) {\n                    var _result;\n                    var _error;\n                    var resolved = !1;\n                    var rejected = !1;\n                    var isAsync = !1;\n                    startActive();\n                    try {\n                        handler((function(res) {\n                            if (isAsync) _this.resolve(res); else {\n                                resolved = !0;\n                                _result = res;\n                            }\n                        }), (function(err) {\n                            if (isAsync) _this.reject(err); else {\n                                rejected = !0;\n                                _error = err;\n                            }\n                        }));\n                    } catch (err) {\n                        endActive();\n                        this.reject(err);\n                        return;\n                    }\n                    endActive();\n                    isAsync = !0;\n                    resolved ? this.resolve(_result) : rejected && this.reject(_error);\n                }\n            }\n            var _proto = ZalgoPromise.prototype;\n            _proto.resolve = function(result) {\n                if (this.resolved || this.rejected) return this;\n                if (utils_isPromise(result)) throw new Error(\"Can not resolve promise with another promise\");\n                this.resolved = !0;\n                this.value = result;\n                this.dispatch();\n                return this;\n            };\n            _proto.reject = function(error) {\n                var _this2 = this;\n                if (this.resolved || this.rejected) return this;\n                if (utils_isPromise(error)) throw new Error(\"Can not reject promise with another promise\");\n                if (!error) {\n                    var _err = error && \"function\" == typeof error.toString ? error.toString() : {}.toString.call(error);\n                    error = new Error(\"Expected reject to be called with Error, got \" + _err);\n                }\n                this.rejected = !0;\n                this.error = error;\n                this.errorHandled || setTimeout((function() {\n                    _this2.errorHandled || function(err, promise) {\n                        if (-1 === dispatchedErrors.indexOf(err)) {\n                            dispatchedErrors.push(err);\n                            setTimeout((function() {\n                                throw err;\n                            }), 1);\n                            for (var j = 0; j < possiblyUnhandledPromiseHandlers.length; j++) possiblyUnhandledPromiseHandlers[j](err, promise);\n                        }\n                    }(error, _this2);\n                }), 1);\n                this.dispatch();\n                return this;\n            };\n            _proto.asyncReject = function(error) {\n                this.errorHandled = !0;\n                this.reject(error);\n                return this;\n            };\n            _proto.dispatch = function() {\n                var resolved = this.resolved, rejected = this.rejected, handlers = this.handlers;\n                if (!this.dispatching && (resolved || rejected)) {\n                    this.dispatching = !0;\n                    startActive();\n                    var chain = function(firstPromise, secondPromise) {\n                        return firstPromise.then((function(res) {\n                            secondPromise.resolve(res);\n                        }), (function(err) {\n                            secondPromise.reject(err);\n                        }));\n                    };\n                    for (var i = 0; i < handlers.length; i++) {\n                        var _handlers$i = handlers[i], onSuccess = _handlers$i.onSuccess, onError = _handlers$i.onError, promise = _handlers$i.promise;\n                        var _result2 = void 0;\n                        if (resolved) try {\n                            _result2 = onSuccess ? onSuccess(this.value) : this.value;\n                        } catch (err) {\n                            promise.reject(err);\n                            continue;\n                        } else if (rejected) {\n                            if (!onError) {\n                                promise.reject(this.error);\n                                continue;\n                            }\n                            try {\n                                _result2 = onError(this.error);\n                            } catch (err) {\n                                promise.reject(err);\n                                continue;\n                            }\n                        }\n                        if (_result2 instanceof ZalgoPromise && (_result2.resolved || _result2.rejected)) {\n                            _result2.resolved ? promise.resolve(_result2.value) : promise.reject(_result2.error);\n                            _result2.errorHandled = !0;\n                        } else utils_isPromise(_result2) ? _result2 instanceof ZalgoPromise && (_result2.resolved || _result2.rejected) ? _result2.resolved ? promise.resolve(_result2.value) : promise.reject(_result2.error) : chain(_result2, promise) : promise.resolve(_result2);\n                    }\n                    handlers.length = 0;\n                    this.dispatching = !1;\n                    endActive();\n                }\n            };\n            _proto.then = function(onSuccess, onError) {\n                if (onSuccess && \"function\" != typeof onSuccess && !onSuccess.call) throw new Error(\"Promise.then expected a function for success handler\");\n                if (onError && \"function\" != typeof onError && !onError.call) throw new Error(\"Promise.then expected a function for error handler\");\n                var promise = new ZalgoPromise;\n                this.handlers.push({\n                    promise: promise,\n                    onSuccess: onSuccess,\n                    onError: onError\n                });\n                this.errorHandled = !0;\n                this.dispatch();\n                return promise;\n            };\n            _proto.catch = function(onError) {\n                return this.then(void 0, onError);\n            };\n            _proto.finally = function(onFinally) {\n                if (onFinally && \"function\" != typeof onFinally && !onFinally.call) throw new Error(\"Promise.finally expected a function\");\n                return this.then((function(result) {\n                    return ZalgoPromise.try(onFinally).then((function() {\n                        return result;\n                    }));\n                }), (function(err) {\n                    return ZalgoPromise.try(onFinally).then((function() {\n                        throw err;\n                    }));\n                }));\n            };\n            _proto.timeout = function(time, err) {\n                var _this3 = this;\n                if (this.resolved || this.rejected) return this;\n                var timeout = setTimeout((function() {\n                    _this3.resolved || _this3.rejected || _this3.reject(err || new Error(\"Promise timed out after \" + time + \"ms\"));\n                }), time);\n                return this.then((function(result) {\n                    clearTimeout(timeout);\n                    return result;\n                }));\n            };\n            _proto.toPromise = function() {\n                if (\"undefined\" == typeof Promise) throw new TypeError(\"Could not find Promise\");\n                return Promise.resolve(this);\n            };\n            ZalgoPromise.resolve = function(value) {\n                return value instanceof ZalgoPromise ? value : utils_isPromise(value) ? new ZalgoPromise((function(resolve, reject) {\n                    return value.then(resolve, reject);\n                })) : (new ZalgoPromise).resolve(value);\n            };\n            ZalgoPromise.reject = function(error) {\n                return (new ZalgoPromise).reject(error);\n            };\n            ZalgoPromise.asyncReject = function(error) {\n                return (new ZalgoPromise).asyncReject(error);\n            };\n            ZalgoPromise.all = function(promises) {\n                var promise = new ZalgoPromise;\n                var count = promises.length;\n                var results = [];\n                if (!count) {\n                    promise.resolve(results);\n                    return promise;\n                }\n                var chain = function(i, firstPromise, secondPromise) {\n                    return firstPromise.then((function(res) {\n                        results[i] = res;\n                        0 == (count -= 1) && promise.resolve(results);\n                    }), (function(err) {\n                        secondPromise.reject(err);\n                    }));\n                };\n                for (var i = 0; i < promises.length; i++) {\n                    var prom = promises[i];\n                    if (prom instanceof ZalgoPromise) {\n                        if (prom.resolved) {\n                            results[i] = prom.value;\n                            count -= 1;\n                            continue;\n                        }\n                    } else if (!utils_isPromise(prom)) {\n                        results[i] = prom;\n                        count -= 1;\n                        continue;\n                    }\n                    chain(i, ZalgoPromise.resolve(prom), promise);\n                }\n                0 === count && promise.resolve(results);\n                return promise;\n            };\n            ZalgoPromise.hash = function(promises) {\n                var result = {};\n                return ZalgoPromise.all(Object.keys(promises).map((function(key) {\n                    return ZalgoPromise.resolve(promises[key]).then((function(value) {\n                        result[key] = value;\n                    }));\n                }))).then((function() {\n                    return result;\n                }));\n            };\n            ZalgoPromise.map = function(items, method) {\n                return ZalgoPromise.all(items.map(method));\n            };\n            ZalgoPromise.onPossiblyUnhandledException = function(handler) {\n                return function(handler) {\n                    possiblyUnhandledPromiseHandlers.push(handler);\n                    return {\n                        cancel: function() {\n                            possiblyUnhandledPromiseHandlers.splice(possiblyUnhandledPromiseHandlers.indexOf(handler), 1);\n                        }\n                    };\n                }(handler);\n            };\n            ZalgoPromise.try = function(method, context, args) {\n                if (method && \"function\" != typeof method && !method.call) throw new Error(\"Promise.try expected a function\");\n                var result;\n                startActive();\n                try {\n                    result = method.apply(context, args || []);\n                } catch (err) {\n                    endActive();\n                    return ZalgoPromise.reject(err);\n                }\n                endActive();\n                return ZalgoPromise.resolve(result);\n            };\n            ZalgoPromise.delay = function(_delay) {\n                return new ZalgoPromise((function(resolve) {\n                    setTimeout(resolve, _delay);\n                }));\n            };\n            ZalgoPromise.isPromise = function(value) {\n                return !!(value && value instanceof ZalgoPromise) || utils_isPromise(value);\n            };\n            ZalgoPromise.flush = function() {\n                return function(Zalgo) {\n                    var promise = flushPromise = flushPromise || new Zalgo;\n                    flushActive();\n                    return promise;\n                }(ZalgoPromise);\n            };\n            return ZalgoPromise;\n        }();\n        function _extends() {\n            return (_extends = Object.assign || function(target) {\n                for (var i = 1; i < arguments.length; i++) {\n                    var source = arguments[i];\n                    for (var key in source) ({}).hasOwnProperty.call(source, key) && (target[key] = source[key]);\n                }\n                return target;\n            }).apply(this, arguments);\n        }\n        function util_safeIndexOf(collection, item) {\n            for (var i = 0; i < collection.length; i++) try {\n                if (collection[i] === item) return i;\n            } catch (err) {}\n            return -1;\n        }\n        var weakmap_CrossDomainSafeWeakMap = function() {\n            function CrossDomainSafeWeakMap() {\n                this.name = void 0;\n                this.weakmap = void 0;\n                this.keys = void 0;\n                this.values = void 0;\n                this.name = \"__weakmap_\" + (1e9 * Math.random() >>> 0) + \"__\";\n                if (function() {\n                    if (\"undefined\" == typeof WeakMap) return !1;\n                    if (void 0 === Object.freeze) return !1;\n                    try {\n                        var testWeakMap = new WeakMap;\n                        var testKey = {};\n                        Object.freeze(testKey);\n                        testWeakMap.set(testKey, \"__testvalue__\");\n                        return \"__testvalue__\" === testWeakMap.get(testKey);\n                    } catch (err) {\n                        return !1;\n                    }\n                }()) try {\n                    this.weakmap = new WeakMap;\n                } catch (err) {}\n                this.keys = [];\n                this.values = [];\n            }\n            var _proto = CrossDomainSafeWeakMap.prototype;\n            _proto._cleanupClosedWindows = function() {\n                var weakmap = this.weakmap;\n                var keys = this.keys;\n                for (var i = 0; i < keys.length; i++) {\n                    var value = keys[i];\n                    if (isWindow(value) && isWindowClosed(value)) {\n                        if (weakmap) try {\n                            weakmap.delete(value);\n                        } catch (err) {}\n                        keys.splice(i, 1);\n                        this.values.splice(i, 1);\n                        i -= 1;\n                    }\n                }\n            };\n            _proto.isSafeToReadWrite = function(key) {\n                return !isWindow(key);\n            };\n            _proto.set = function(key, value) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    weakmap.set(key, value);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var name = this.name;\n                    var entry = key[name];\n                    entry && entry[0] === key ? entry[1] = value : Object.defineProperty(key, name, {\n                        value: [ key, value ],\n                        writable: !0\n                    });\n                    return;\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                var keys = this.keys;\n                var values = this.values;\n                var index = util_safeIndexOf(keys, key);\n                if (-1 === index) {\n                    keys.push(key);\n                    values.push(value);\n                } else values[index] = value;\n            };\n            _proto.get = function(key) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    if (weakmap.has(key)) return weakmap.get(key);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var entry = key[this.name];\n                    return entry && entry[0] === key ? entry[1] : void 0;\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                var index = util_safeIndexOf(this.keys, key);\n                if (-1 !== index) return this.values[index];\n            };\n            _proto.delete = function(key) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    weakmap.delete(key);\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var entry = key[this.name];\n                    entry && entry[0] === key && (entry[0] = entry[1] = void 0);\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                var keys = this.keys;\n                var index = util_safeIndexOf(keys, key);\n                if (-1 !== index) {\n                    keys.splice(index, 1);\n                    this.values.splice(index, 1);\n                }\n            };\n            _proto.has = function(key) {\n                if (!key) throw new Error(\"WeakMap expected key\");\n                var weakmap = this.weakmap;\n                if (weakmap) try {\n                    if (weakmap.has(key)) return !0;\n                } catch (err) {\n                    delete this.weakmap;\n                }\n                if (this.isSafeToReadWrite(key)) try {\n                    var entry = key[this.name];\n                    return !(!entry || entry[0] !== key);\n                } catch (err) {}\n                this._cleanupClosedWindows();\n                return -1 !== util_safeIndexOf(this.keys, key);\n            };\n            _proto.getOrSet = function(key, getter) {\n                if (this.has(key)) return this.get(key);\n                var value = getter();\n                this.set(key, value);\n                return value;\n            };\n            return CrossDomainSafeWeakMap;\n        }();\n        function uniqueID() {\n            var chars = \"0123456789abcdef\";\n            return \"xxxxxxxxxx\".replace(/./g, (function() {\n                return chars.charAt(Math.floor(Math.random() * chars.length));\n            })) + \"_\" + function(str) {\n                if (\"function\" == typeof btoa) return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (function(m, p1) {\n                    return String.fromCharCode(parseInt(p1, 16));\n                })));\n                if (\"undefined\" != typeof Buffer) return Buffer.from(str, \"utf8\").toString(\"base64\");\n                throw new Error(\"Can not find window.btoa or Buffer\");\n            }((new Date).toISOString().slice(11, 19).replace(\"T\", \".\")).replace(/[^a-zA-Z0-9]/g, \"\").toLowerCase();\n        }\n        var objectIDs;\n        function serializeArgs(args) {\n            try {\n                return JSON.stringify([].slice.call(args), (function(subkey, val) {\n                    return \"function\" == typeof val ? \"memoize[\" + function(obj) {\n                        objectIDs = objectIDs || new weakmap_CrossDomainSafeWeakMap;\n                        if (null == obj || \"object\" != typeof obj && \"function\" != typeof obj) throw new Error(\"Invalid object\");\n                        var uid = objectIDs.get(obj);\n                        if (!uid) {\n                            uid = typeof obj + \":\" + uniqueID();\n                            objectIDs.set(obj, uid);\n                        }\n                        return uid;\n                    }(val) + \"]\" : val;\n                }));\n            } catch (err) {\n                throw new Error(\"Arguments not serializable -- can not be used to memoize\");\n            }\n        }\n        function memoizePromise(method) {\n            var cache = {};\n            function memoizedPromiseFunction() {\n                var _arguments = arguments, _this2 = this;\n                for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) args[_key2] = arguments[_key2];\n                var key = serializeArgs(args);\n                if (cache.hasOwnProperty(key)) return cache[key];\n                cache[key] = promise_ZalgoPromise.try((function() {\n                    return method.apply(_this2, _arguments);\n                })).finally((function() {\n                    delete cache[key];\n                }));\n                return cache[key];\n            }\n            memoizedPromiseFunction.reset = function() {\n                cache = {};\n            };\n            return function(fn, name) {\n                try {\n                    delete fn.name;\n                    fn.name = name;\n                } catch (err) {}\n                fn.__name__ = fn.displayName = name;\n                return fn;\n            }(memoizedPromiseFunction, ((fn = method).name || fn.__name__ || fn.displayName || \"anonymous\") + \"::promiseMemoized\");\n            var fn;\n        }\n        function src_util_noop() {}\n        function stringifyError(err, level) {\n            void 0 === level && (level = 1);\n            if (level >= 3) return \"stringifyError stack overflow\";\n            try {\n                if (!err) return \"<unknown error: \" + {}.toString.call(err) + \">\";\n                if (\"string\" == typeof err) return err;\n                if (err instanceof Error) {\n                    var stack = err && err.stack;\n                    var message = err && err.message;\n                    if (stack && message) return -1 !== stack.indexOf(message) ? stack : message + \"\\n\" + stack;\n                    if (stack) return stack;\n                    if (message) return message;\n                }\n                return err && err.toString && \"function\" == typeof err.toString ? err.toString() : {}.toString.call(err);\n            } catch (newErr) {\n                return \"Error while stringifying error: \" + stringifyError(newErr, level + 1);\n            }\n        }\n        function stringify(item) {\n            return \"string\" == typeof item ? item : item && item.toString && \"function\" == typeof item.toString ? item.toString() : {}.toString.call(item);\n        }\n        function util_isRegex(item) {\n            return \"[object RegExp]\" === {}.toString.call(item);\n        }\n        function util_getOrSet(obj, key, getter) {\n            if (obj.hasOwnProperty(key)) return obj[key];\n            var val = getter();\n            obj[key] = val;\n            return val;\n        }\n        Object.create(Error.prototype);\n        function global_getGlobal(win) {\n            void 0 === win && (win = window);\n            return win !== window ? win.__post_robot_10_0_37__ : win.__post_robot_10_0_37__ = win.__post_robot_10_0_37__ || {};\n        }\n        var getObj = function() {\n            return {};\n        };\n        function globalStore(key, defStore) {\n            void 0 === key && (key = \"store\");\n            void 0 === defStore && (defStore = getObj);\n            return util_getOrSet(global_getGlobal(), key, (function() {\n                var store = defStore();\n                return {\n                    has: function(storeKey) {\n                        return store.hasOwnProperty(storeKey);\n                    },\n                    get: function(storeKey, defVal) {\n                        return store.hasOwnProperty(storeKey) ? store[storeKey] : defVal;\n                    },\n                    set: function(storeKey, val) {\n                        store[storeKey] = val;\n                        return val;\n                    },\n                    del: function(storeKey) {\n                        delete store[storeKey];\n                    },\n                    getOrSet: function(storeKey, getter) {\n                        return util_getOrSet(store, storeKey, getter);\n                    },\n                    reset: function() {\n                        store = defStore();\n                    },\n                    keys: function() {\n                        return Object.keys(store);\n                    }\n                };\n            }));\n        }\n        var WildCard = function() {};\n        function getWildcard() {\n            var global = global_getGlobal();\n            global.WINDOW_WILDCARD = global.WINDOW_WILDCARD || new WildCard;\n            return global.WINDOW_WILDCARD;\n        }\n        function windowStore(key, defStore) {\n            void 0 === key && (key = \"store\");\n            void 0 === defStore && (defStore = getObj);\n            return globalStore(\"windowStore\").getOrSet(key, (function() {\n                var winStore = new weakmap_CrossDomainSafeWeakMap;\n                var getStore = function(win) {\n                    return winStore.getOrSet(win, defStore);\n                };\n                return {\n                    has: function(win) {\n                        return getStore(win).hasOwnProperty(key);\n                    },\n                    get: function(win, defVal) {\n                        var store = getStore(win);\n                        return store.hasOwnProperty(key) ? store[key] : defVal;\n                    },\n                    set: function(win, val) {\n                        getStore(win)[key] = val;\n                        return val;\n                    },\n                    del: function(win) {\n                        delete getStore(win)[key];\n                    },\n                    getOrSet: function(win, getter) {\n                        return util_getOrSet(getStore(win), key, getter);\n                    }\n                };\n            }));\n        }\n        function getInstanceID() {\n            return globalStore(\"instance\").getOrSet(\"instanceID\", uniqueID);\n        }\n        function resolveHelloPromise(win, _ref) {\n            var domain = _ref.domain;\n            var helloPromises = windowStore(\"helloPromises\");\n            var existingPromise = helloPromises.get(win);\n            existingPromise && existingPromise.resolve({\n                domain: domain\n            });\n            var newPromise = promise_ZalgoPromise.resolve({\n                domain: domain\n            });\n            helloPromises.set(win, newPromise);\n            return newPromise;\n        }\n        function sayHello(win, _ref4) {\n            return (0, _ref4.send)(win, \"postrobot_hello\", {\n                instanceID: getInstanceID()\n            }, {\n                domain: \"*\",\n                timeout: -1\n            }).then((function(_ref5) {\n                var origin = _ref5.origin, instanceID = _ref5.data.instanceID;\n                resolveHelloPromise(win, {\n                    domain: origin\n                });\n                return {\n                    win: win,\n                    domain: origin,\n                    instanceID: instanceID\n                };\n            }));\n        }\n        function getWindowInstanceID(win, _ref6) {\n            var send = _ref6.send;\n            return windowStore(\"windowInstanceIDPromises\").getOrSet(win, (function() {\n                return sayHello(win, {\n                    send: send\n                }).then((function(_ref7) {\n                    return _ref7.instanceID;\n                }));\n            }));\n        }\n        function markWindowKnown(win) {\n            windowStore(\"knownWindows\").set(win, !0);\n        }\n        function isSerializedType(item) {\n            return \"object\" == typeof item && null !== item && \"string\" == typeof item.__type__;\n        }\n        function determineType(val) {\n            return void 0 === val ? \"undefined\" : null === val ? \"null\" : Array.isArray(val) ? \"array\" : \"function\" == typeof val ? \"function\" : \"object\" == typeof val ? val instanceof Error ? \"error\" : \"function\" == typeof val.then ? \"promise\" : \"[object RegExp]\" === {}.toString.call(val) ? \"regex\" : \"[object Date]\" === {}.toString.call(val) ? \"date\" : \"object\" : \"string\" == typeof val ? \"string\" : \"number\" == typeof val ? \"number\" : \"boolean\" == typeof val ? \"boolean\" : void 0;\n        }\n        function serializeType(type, val) {\n            return {\n                __type__: type,\n                __val__: val\n            };\n        }\n        var _SERIALIZER;\n        var SERIALIZER = ((_SERIALIZER = {}).function = function() {}, _SERIALIZER.error = function(_ref) {\n            return serializeType(\"error\", {\n                message: _ref.message,\n                stack: _ref.stack,\n                code: _ref.code,\n                data: _ref.data\n            });\n        }, _SERIALIZER.promise = function() {}, _SERIALIZER.regex = function(val) {\n            return serializeType(\"regex\", val.source);\n        }, _SERIALIZER.date = function(val) {\n            return serializeType(\"date\", val.toJSON());\n        }, _SERIALIZER.array = function(val) {\n            return val;\n        }, _SERIALIZER.object = function(val) {\n            return val;\n        }, _SERIALIZER.string = function(val) {\n            return val;\n        }, _SERIALIZER.number = function(val) {\n            return val;\n        }, _SERIALIZER.boolean = function(val) {\n            return val;\n        }, _SERIALIZER.null = function(val) {\n            return val;\n        }, _SERIALIZER);\n        var defaultSerializers = {};\n        var _DESERIALIZER;\n        var DESERIALIZER = ((_DESERIALIZER = {}).function = function() {\n            throw new Error(\"Function serialization is not implemented; nothing to deserialize\");\n        }, _DESERIALIZER.error = function(_ref2) {\n            var stack = _ref2.stack, code = _ref2.code, data = _ref2.data;\n            var error = new Error(_ref2.message);\n            error.code = code;\n            data && (error.data = data);\n            error.stack = stack + \"\\n\\n\" + error.stack;\n            return error;\n        }, _DESERIALIZER.promise = function() {\n            throw new Error(\"Promise serialization is not implemented; nothing to deserialize\");\n        }, _DESERIALIZER.regex = function(val) {\n            return new RegExp(val);\n        }, _DESERIALIZER.date = function(val) {\n            return new Date(val);\n        }, _DESERIALIZER.array = function(val) {\n            return val;\n        }, _DESERIALIZER.object = function(val) {\n            return val;\n        }, _DESERIALIZER.string = function(val) {\n            return val;\n        }, _DESERIALIZER.number = function(val) {\n            return val;\n        }, _DESERIALIZER.boolean = function(val) {\n            return val;\n        }, _DESERIALIZER.null = function(val) {\n            return val;\n        }, _DESERIALIZER);\n        var defaultDeserializers = {};\n        new promise_ZalgoPromise((function(resolve) {\n            if (window.document && window.document.body) return resolve(window.document.body);\n            var interval = setInterval((function() {\n                if (window.document && window.document.body) {\n                    clearInterval(interval);\n                    return resolve(window.document.body);\n                }\n            }), 10);\n        }));\n        function cleanupProxyWindows() {\n            var idToProxyWindow = globalStore(\"idToProxyWindow\");\n            for (var _i2 = 0, _idToProxyWindow$keys2 = idToProxyWindow.keys(); _i2 < _idToProxyWindow$keys2.length; _i2++) {\n                var id = _idToProxyWindow$keys2[_i2];\n                idToProxyWindow.get(id).shouldClean() && idToProxyWindow.del(id);\n            }\n        }\n        function getSerializedWindow(winPromise, _ref) {\n            var send = _ref.send, _ref$id = _ref.id, id = void 0 === _ref$id ? uniqueID() : _ref$id;\n            var windowNamePromise = winPromise.then((function(win) {\n                if (isSameDomain(win)) return assertSameDomain(win).name;\n            }));\n            var windowTypePromise = winPromise.then((function(window) {\n                if (isWindowClosed(window)) throw new Error(\"Window is closed, can not determine type\");\n                return getOpener(window) ? \"popup\" : \"iframe\";\n            }));\n            windowNamePromise.catch(src_util_noop);\n            windowTypePromise.catch(src_util_noop);\n            return {\n                id: id,\n                getType: function() {\n                    return windowTypePromise;\n                },\n                getInstanceID: memoizePromise((function() {\n                    return winPromise.then((function(win) {\n                        return getWindowInstanceID(win, {\n                            send: send\n                        });\n                    }));\n                })),\n                close: function() {\n                    return winPromise.then(closeWindow);\n                },\n                getName: function() {\n                    return winPromise.then((function(win) {\n                        if (!isWindowClosed(win)) return isSameDomain(win) ? assertSameDomain(win).name : windowNamePromise;\n                    }));\n                },\n                focus: function() {\n                    return winPromise.then((function(win) {\n                        win.focus();\n                    }));\n                },\n                isClosed: function() {\n                    return winPromise.then((function(win) {\n                        return isWindowClosed(win);\n                    }));\n                },\n                setLocation: function(href) {\n                    return winPromise.then((function(win) {\n                        var domain = window.location.protocol + \"//\" + window.location.host;\n                        if (0 === href.indexOf(\"/\")) href = \"\" + domain + href; else if (!href.match(/^https?:\\/\\//) && 0 !== href.indexOf(domain)) throw new Error(\"Expected url to be http or https url, or absolute path, got \" + JSON.stringify(href));\n                        if (isSameDomain(win)) try {\n                            if (win.location && \"function\" == typeof win.location.replace) {\n                                win.location.replace(href);\n                                return;\n                            }\n                        } catch (err) {}\n                        win.location = href;\n                    }));\n                },\n                setName: function(name) {\n                    return winPromise.then((function(win) {\n                        var sameDomain = isSameDomain(win);\n                        var frame = function(win) {\n                            if (isSameDomain(win)) return assertSameDomain(win).frameElement;\n                            for (var _i21 = 0, _document$querySelect2 = document.querySelectorAll(\"iframe\"); _i21 < _document$querySelect2.length; _i21++) {\n                                var frame = _document$querySelect2[_i21];\n                                if (frame && frame.contentWindow && frame.contentWindow === win) return frame;\n                            }\n                        }(win);\n                        if (!sameDomain) throw new Error(\"Can not set name for cross-domain window: \" + name);\n                        assertSameDomain(win).name = name;\n                        frame && frame.setAttribute(\"name\", name);\n                        windowNamePromise = promise_ZalgoPromise.resolve(name);\n                    }));\n                }\n            };\n        }\n        var window_ProxyWindow = function() {\n            function ProxyWindow(_ref2) {\n                var send = _ref2.send, win = _ref2.win, serializedWindow = _ref2.serializedWindow;\n                this.id = void 0;\n                this.isProxyWindow = !0;\n                this.serializedWindow = void 0;\n                this.actualWindow = void 0;\n                this.actualWindowPromise = void 0;\n                this.send = void 0;\n                this.name = void 0;\n                this.actualWindowPromise = new promise_ZalgoPromise;\n                this.serializedWindow = serializedWindow || getSerializedWindow(this.actualWindowPromise, {\n                    send: send\n                });\n                globalStore(\"idToProxyWindow\").set(this.getID(), this);\n                win && this.setWindow(win, {\n                    send: send\n                });\n            }\n            var _proto = ProxyWindow.prototype;\n            _proto.getID = function() {\n                return this.serializedWindow.id;\n            };\n            _proto.getType = function() {\n                return this.serializedWindow.getType();\n            };\n            _proto.isPopup = function() {\n                return this.getType().then((function(type) {\n                    return \"popup\" === type;\n                }));\n            };\n            _proto.setLocation = function(href) {\n                var _this = this;\n                return this.serializedWindow.setLocation(href).then((function() {\n                    return _this;\n                }));\n            };\n            _proto.getName = function() {\n                return this.serializedWindow.getName();\n            };\n            _proto.setName = function(name) {\n                var _this2 = this;\n                return this.serializedWindow.setName(name).then((function() {\n                    return _this2;\n                }));\n            };\n            _proto.close = function() {\n                var _this3 = this;\n                return this.serializedWindow.close().then((function() {\n                    return _this3;\n                }));\n            };\n            _proto.focus = function() {\n                var _this4 = this;\n                var isPopupPromise = this.isPopup();\n                var getNamePromise = this.getName();\n                var reopenPromise = promise_ZalgoPromise.hash({\n                    isPopup: isPopupPromise,\n                    name: getNamePromise\n                }).then((function(_ref3) {\n                    var name = _ref3.name;\n                    _ref3.isPopup && name && window.open(\"\", name);\n                }));\n                var focusPromise = this.serializedWindow.focus();\n                return promise_ZalgoPromise.all([ reopenPromise, focusPromise ]).then((function() {\n                    return _this4;\n                }));\n            };\n            _proto.isClosed = function() {\n                return this.serializedWindow.isClosed();\n            };\n            _proto.getWindow = function() {\n                return this.actualWindow;\n            };\n            _proto.setWindow = function(win, _ref4) {\n                var send = _ref4.send;\n                this.actualWindow = win;\n                this.actualWindowPromise.resolve(this.actualWindow);\n                this.serializedWindow = getSerializedWindow(this.actualWindowPromise, {\n                    send: send,\n                    id: this.getID()\n                });\n                windowStore(\"winToProxyWindow\").set(win, this);\n            };\n            _proto.awaitWindow = function() {\n                return this.actualWindowPromise;\n            };\n            _proto.matchWindow = function(win, _ref5) {\n                var _this5 = this;\n                var send = _ref5.send;\n                return promise_ZalgoPromise.try((function() {\n                    return _this5.actualWindow ? win === _this5.actualWindow : promise_ZalgoPromise.hash({\n                        proxyInstanceID: _this5.getInstanceID(),\n                        knownWindowInstanceID: getWindowInstanceID(win, {\n                            send: send\n                        })\n                    }).then((function(_ref6) {\n                        var match = _ref6.proxyInstanceID === _ref6.knownWindowInstanceID;\n                        match && _this5.setWindow(win, {\n                            send: send\n                        });\n                        return match;\n                    }));\n                }));\n            };\n            _proto.unwrap = function() {\n                return this.actualWindow || this;\n            };\n            _proto.getInstanceID = function() {\n                return this.serializedWindow.getInstanceID();\n            };\n            _proto.shouldClean = function() {\n                return Boolean(this.actualWindow && isWindowClosed(this.actualWindow));\n            };\n            _proto.serialize = function() {\n                return this.serializedWindow;\n            };\n            ProxyWindow.unwrap = function(win) {\n                return ProxyWindow.isProxyWindow(win) ? win.unwrap() : win;\n            };\n            ProxyWindow.serialize = function(win, _ref7) {\n                var send = _ref7.send;\n                cleanupProxyWindows();\n                return ProxyWindow.toProxyWindow(win, {\n                    send: send\n                }).serialize();\n            };\n            ProxyWindow.deserialize = function(serializedWindow, _ref8) {\n                var send = _ref8.send;\n                cleanupProxyWindows();\n                return globalStore(\"idToProxyWindow\").get(serializedWindow.id) || new ProxyWindow({\n                    serializedWindow: serializedWindow,\n                    send: send\n                });\n            };\n            ProxyWindow.isProxyWindow = function(obj) {\n                return Boolean(obj && !isWindow(obj) && obj.isProxyWindow);\n            };\n            ProxyWindow.toProxyWindow = function(win, _ref9) {\n                var send = _ref9.send;\n                cleanupProxyWindows();\n                if (ProxyWindow.isProxyWindow(win)) return win;\n                var actualWindow = win;\n                return windowStore(\"winToProxyWindow\").get(actualWindow) || new ProxyWindow({\n                    win: actualWindow,\n                    send: send\n                });\n            };\n            return ProxyWindow;\n        }();\n        function addMethod(id, val, name, source, domain) {\n            var methodStore = windowStore(\"methodStore\");\n            var proxyWindowMethods = globalStore(\"proxyWindowMethods\");\n            if (window_ProxyWindow.isProxyWindow(source)) proxyWindowMethods.set(id, {\n                val: val,\n                name: name,\n                domain: domain,\n                source: source\n            }); else {\n                proxyWindowMethods.del(id);\n                methodStore.getOrSet(source, (function() {\n                    return {};\n                }))[id] = {\n                    domain: domain,\n                    name: name,\n                    val: val,\n                    source: source\n                };\n            }\n        }\n        function lookupMethod(source, id) {\n            var methodStore = windowStore(\"methodStore\");\n            var proxyWindowMethods = globalStore(\"proxyWindowMethods\");\n            return methodStore.getOrSet(source, (function() {\n                return {};\n            }))[id] || proxyWindowMethods.get(id);\n        }\n        function function_serializeFunction(destination, domain, val, key, _ref3) {\n            on = (_ref = {\n                on: _ref3.on,\n                send: _ref3.send\n            }).on, send = _ref.send, globalStore(\"builtinListeners\").getOrSet(\"functionCalls\", (function() {\n                return on(\"postrobot_method\", {\n                    domain: \"*\"\n                }, (function(_ref2) {\n                    var source = _ref2.source, origin = _ref2.origin, data = _ref2.data;\n                    var id = data.id, name = data.name;\n                    var meth = lookupMethod(source, id);\n                    if (!meth) throw new Error(\"Could not find method '\" + name + \"' with id: \" + data.id + \" in \" + getDomain(window));\n                    var methodSource = meth.source, domain = meth.domain, val = meth.val;\n                    return promise_ZalgoPromise.try((function() {\n                        if (!matchDomain(domain, origin)) throw new Error(\"Method '\" + data.name + \"' domain \" + JSON.stringify(util_isRegex(meth.domain) ? meth.domain.source : meth.domain) + \" does not match origin \" + origin + \" in \" + getDomain(window));\n                        if (window_ProxyWindow.isProxyWindow(methodSource)) return methodSource.matchWindow(source, {\n                            send: send\n                        }).then((function(match) {\n                            if (!match) throw new Error(\"Method call '\" + data.name + \"' failed - proxy window does not match source in \" + getDomain(window));\n                        }));\n                    })).then((function() {\n                        return val.apply({\n                            source: source,\n                            origin: origin\n                        }, data.args);\n                    }), (function(err) {\n                        return promise_ZalgoPromise.try((function() {\n                            if (val.onError) return val.onError(err);\n                        })).then((function() {\n                            err.stack && (err.stack = \"Remote call to \" + name + \"(\" + function(args) {\n                                void 0 === args && (args = []);\n                                return (item = args, [].slice.call(item)).map((function(arg) {\n                                    return \"string\" == typeof arg ? \"'\" + arg + \"'\" : void 0 === arg ? \"undefined\" : null === arg ? \"null\" : \"boolean\" == typeof arg ? arg.toString() : Array.isArray(arg) ? \"[ ... ]\" : \"object\" == typeof arg ? \"{ ... }\" : \"function\" == typeof arg ? \"() => { ... }\" : \"<\" + typeof arg + \">\";\n                                })).join(\", \");\n                                var item;\n                            }(data.args) + \") failed\\n\\n\" + err.stack);\n                            throw err;\n                        }));\n                    })).then((function(result) {\n                        return {\n                            result: result,\n                            id: id,\n                            name: name\n                        };\n                    }));\n                }));\n            }));\n            var _ref, on, send;\n            var id = val.__id__ || uniqueID();\n            destination = window_ProxyWindow.unwrap(destination);\n            var name = val.__name__ || val.name || key;\n            \"string\" == typeof name && \"function\" == typeof name.indexOf && 0 === name.indexOf(\"anonymous::\") && (name = name.replace(\"anonymous::\", key + \"::\"));\n            if (window_ProxyWindow.isProxyWindow(destination)) {\n                addMethod(id, val, name, destination, domain);\n                destination.awaitWindow().then((function(win) {\n                    addMethod(id, val, name, win, domain);\n                }));\n            } else addMethod(id, val, name, destination, domain);\n            return serializeType(\"cross_domain_function\", {\n                id: id,\n                name: name\n            });\n        }\n        function serializeMessage(destination, domain, obj, _ref) {\n            var _serialize;\n            var on = _ref.on, send = _ref.send;\n            return function(obj, serializers) {\n                void 0 === serializers && (serializers = defaultSerializers);\n                var result = JSON.stringify(obj, (function(key) {\n                    var val = this[key];\n                    if (isSerializedType(this)) return val;\n                    var type = determineType(val);\n                    if (!type) return val;\n                    var serializer = serializers[type] || SERIALIZER[type];\n                    return serializer ? serializer(val, key) : val;\n                }));\n                return void 0 === result ? \"undefined\" : result;\n            }(obj, ((_serialize = {}).promise = function(val, key) {\n                return function(destination, domain, val, key, _ref) {\n                    return serializeType(\"cross_domain_zalgo_promise\", {\n                        then: function_serializeFunction(destination, domain, (function(resolve, reject) {\n                            return val.then(resolve, reject);\n                        }), key, {\n                            on: _ref.on,\n                            send: _ref.send\n                        })\n                    });\n                }(destination, domain, val, key, {\n                    on: on,\n                    send: send\n                });\n            }, _serialize.function = function(val, key) {\n                return function_serializeFunction(destination, domain, val, key, {\n                    on: on,\n                    send: send\n                });\n            }, _serialize.object = function(val) {\n                return isWindow(val) || window_ProxyWindow.isProxyWindow(val) ? serializeType(\"cross_domain_window\", window_ProxyWindow.serialize(val, {\n                    send: send\n                })) : val;\n            }, _serialize));\n        }\n        function deserializeMessage(source, origin, message, _ref2) {\n            var _deserialize;\n            var send = _ref2.send;\n            return function(str, deserializers) {\n                void 0 === deserializers && (deserializers = defaultDeserializers);\n                if (\"undefined\" !== str) return JSON.parse(str, (function(key, val) {\n                    if (isSerializedType(this)) return val;\n                    var type;\n                    var value;\n                    if (isSerializedType(val)) {\n                        type = val.__type__;\n                        value = val.__val__;\n                    } else {\n                        type = determineType(val);\n                        value = val;\n                    }\n                    if (!type) return value;\n                    var deserializer = deserializers[type] || DESERIALIZER[type];\n                    return deserializer ? deserializer(value, key) : value;\n                }));\n            }(message, ((_deserialize = {}).cross_domain_zalgo_promise = function(serializedPromise) {\n                return function(source, origin, _ref2) {\n                    return new promise_ZalgoPromise(_ref2.then);\n                }(0, 0, serializedPromise);\n            }, _deserialize.cross_domain_function = function(serializedFunction) {\n                return function(source, origin, _ref4, _ref5) {\n                    var id = _ref4.id, name = _ref4.name;\n                    var send = _ref5.send;\n                    var getDeserializedFunction = function(opts) {\n                        void 0 === opts && (opts = {});\n                        function crossDomainFunctionWrapper() {\n                            var _arguments = arguments;\n                            return window_ProxyWindow.toProxyWindow(source, {\n                                send: send\n                            }).awaitWindow().then((function(win) {\n                                var meth = lookupMethod(win, id);\n                                if (meth && meth.val !== crossDomainFunctionWrapper) return meth.val.apply({\n                                    source: window,\n                                    origin: getDomain()\n                                }, _arguments);\n                                var options = {\n                                    domain: origin,\n                                    fireAndForget: opts.fireAndForget\n                                };\n                                var _args = [].slice.call(_arguments);\n                                return send(win, \"postrobot_method\", {\n                                    id: id,\n                                    name: name,\n                                    args: _args\n                                }, options).then((function(res) {\n                                    if (!opts.fireAndForget) return res.data.result;\n                                }));\n                            })).catch((function(err) {\n                                throw err;\n                            }));\n                        }\n                        crossDomainFunctionWrapper.__name__ = name;\n                        crossDomainFunctionWrapper.__origin__ = origin;\n                        crossDomainFunctionWrapper.__source__ = source;\n                        crossDomainFunctionWrapper.__id__ = id;\n                        crossDomainFunctionWrapper.origin = origin;\n                        return crossDomainFunctionWrapper;\n                    };\n                    var crossDomainFunctionWrapper = getDeserializedFunction();\n                    crossDomainFunctionWrapper.fireAndForget = getDeserializedFunction({\n                        fireAndForget: !0\n                    });\n                    return crossDomainFunctionWrapper;\n                }(source, origin, serializedFunction, {\n                    send: send\n                });\n            }, _deserialize.cross_domain_window = function(serializedWindow) {\n                return window_ProxyWindow.deserialize(serializedWindow, {\n                    send: send\n                });\n            }, _deserialize));\n        }\n        var SEND_MESSAGE_STRATEGIES = {};\n        SEND_MESSAGE_STRATEGIES.postrobot_post_message = function(win, serializedMessage, domain) {\n            (Array.isArray(domain) ? domain : \"string\" == typeof domain ? [ domain ] : [ \"*\" ]).map((function(dom) {\n                return 0 === dom.indexOf(\"file:\") ? \"*\" : dom;\n            })).forEach((function(dom) {\n                win.postMessage(serializedMessage, dom);\n            }));\n        };\n        function send_sendMessage(win, domain, message, _ref) {\n            var _serializeMessage;\n            var on = _ref.on, send = _ref.send;\n            if (isWindowClosed(win)) throw new Error(\"Window is closed\");\n            var serializedMessage = serializeMessage(win, domain, ((_serializeMessage = {}).__post_robot_10_0_37__ = _extends({\n                id: uniqueID(),\n                origin: getDomain(window)\n            }, message), _serializeMessage), {\n                on: on,\n                send: send\n            });\n            var strategies = Object.keys(SEND_MESSAGE_STRATEGIES);\n            var errors = [];\n            for (var _i2 = 0; _i2 < strategies.length; _i2++) {\n                var strategyName = strategies[_i2];\n                try {\n                    SEND_MESSAGE_STRATEGIES[strategyName](win, serializedMessage, domain);\n                } catch (err) {\n                    errors.push(err);\n                }\n            }\n            if (errors.length === strategies.length) throw new Error(\"All post-robot messaging strategies failed:\\n\\n\" + errors.map((function(err, i) {\n                return i + \". \" + stringifyError(err);\n            })).join(\"\\n\\n\"));\n        }\n        function getResponseListener(hash) {\n            return globalStore(\"responseListeners\").get(hash);\n        }\n        function deleteResponseListener(hash) {\n            globalStore(\"responseListeners\").del(hash);\n        }\n        function isResponseListenerErrored(hash) {\n            return globalStore(\"erroredResponseListeners\").has(hash);\n        }\n        function getRequestListener(_ref) {\n            var name = _ref.name, win = _ref.win, domain = _ref.domain;\n            var requestListeners = windowStore(\"requestListeners\");\n            \"*\" === win && (win = null);\n            \"*\" === domain && (domain = null);\n            if (!name) throw new Error(\"Name required to get request listener\");\n            for (var _i4 = 0, _ref3 = [ win, getWildcard() ]; _i4 < _ref3.length; _i4++) {\n                var winQualifier = _ref3[_i4];\n                if (winQualifier) {\n                    var nameListeners = requestListeners.get(winQualifier);\n                    if (nameListeners) {\n                        var domainListeners = nameListeners[name];\n                        if (domainListeners) {\n                            if (domain && \"string\" == typeof domain) {\n                                if (domainListeners[domain]) return domainListeners[domain];\n                                if (domainListeners.__domain_regex__) for (var _i6 = 0, _domainListeners$__DO2 = domainListeners.__domain_regex__; _i6 < _domainListeners$__DO2.length; _i6++) {\n                                    var _domainListeners$__DO3 = _domainListeners$__DO2[_i6], listener = _domainListeners$__DO3.listener;\n                                    if (matchDomain(_domainListeners$__DO3.regex, domain)) return listener;\n                                }\n                            }\n                            if (domainListeners[\"*\"]) return domainListeners[\"*\"];\n                        }\n                    }\n                }\n            }\n        }\n        var _RECEIVE_MESSAGE_TYPE;\n        var RECEIVE_MESSAGE_TYPES = ((_RECEIVE_MESSAGE_TYPE = {}).postrobot_message_request = function(source, origin, message, _ref) {\n            var on = _ref.on, send = _ref.send;\n            var options = getRequestListener({\n                name: message.name,\n                win: source,\n                domain: origin\n            });\n            var logName = \"postrobot_method\" === message.name && message.data && \"string\" == typeof message.data.name ? message.data.name + \"()\" : message.name;\n            function sendResponse(type, ack, response) {\n                void 0 === response && (response = {});\n                if (!message.fireAndForget && !isWindowClosed(source)) try {\n                    send_sendMessage(source, origin, _extends({\n                        type: type,\n                        ack: ack,\n                        hash: message.hash,\n                        name: message.name\n                    }, response), {\n                        on: on,\n                        send: send\n                    });\n                } catch (err) {\n                    throw new Error(\"Send response message failed for \" + logName + \" in \" + getDomain() + \"\\n\\n\" + stringifyError(err));\n                }\n            }\n            return promise_ZalgoPromise.all([ sendResponse(\"postrobot_message_ack\"), promise_ZalgoPromise.try((function() {\n                if (!options) throw new Error(\"No handler found for post message: \" + message.name + \" from \" + origin + \" in \" + window.location.protocol + \"//\" + window.location.host + window.location.pathname);\n                if (!matchDomain(options.domain, origin)) throw new Error(\"Request origin \" + origin + \" does not match domain \" + options.domain.toString());\n                return options.handler({\n                    source: source,\n                    origin: origin,\n                    data: message.data\n                });\n            })).then((function(data) {\n                return sendResponse(\"postrobot_message_response\", \"success\", {\n                    data: data\n                });\n            }), (function(error) {\n                return sendResponse(\"postrobot_message_response\", \"error\", {\n                    error: error\n                });\n            })) ]).then(src_util_noop).catch((function(err) {\n                if (options && options.handleError) return options.handleError(err);\n                throw err;\n            }));\n        }, _RECEIVE_MESSAGE_TYPE.postrobot_message_ack = function(source, origin, message) {\n            if (!isResponseListenerErrored(message.hash)) {\n                var options = getResponseListener(message.hash);\n                if (!options) throw new Error(\"No handler found for post message ack for message: \" + message.name + \" from \" + origin + \" in \" + window.location.protocol + \"//\" + window.location.host + window.location.pathname);\n                try {\n                    if (!matchDomain(options.domain, origin)) throw new Error(\"Ack origin \" + origin + \" does not match domain \" + options.domain.toString());\n                    if (source !== options.win) throw new Error(\"Ack source does not match registered window\");\n                } catch (err) {\n                    options.promise.reject(err);\n                }\n                options.ack = !0;\n            }\n        }, _RECEIVE_MESSAGE_TYPE.postrobot_message_response = function(source, origin, message) {\n            if (!isResponseListenerErrored(message.hash)) {\n                var options = getResponseListener(message.hash);\n                if (!options) throw new Error(\"No handler found for post message response for message: \" + message.name + \" from \" + origin + \" in \" + window.location.protocol + \"//\" + window.location.host + window.location.pathname);\n                if (!matchDomain(options.domain, origin)) throw new Error(\"Response origin \" + origin + \" does not match domain \" + (pattern = options.domain, \n                Array.isArray(pattern) ? \"(\" + pattern.join(\" | \") + \")\" : isRegex(pattern) ? \"RegExp(\" + pattern.toString() : pattern.toString()));\n                var pattern;\n                if (source !== options.win) throw new Error(\"Response source does not match registered window\");\n                deleteResponseListener(message.hash);\n                \"error\" === message.ack ? options.promise.reject(message.error) : \"success\" === message.ack && options.promise.resolve({\n                    source: source,\n                    origin: origin,\n                    data: message.data\n                });\n            }\n        }, _RECEIVE_MESSAGE_TYPE);\n        function receive_receiveMessage(event, _ref2) {\n            var on = _ref2.on, send = _ref2.send;\n            var receivedMessages = globalStore(\"receivedMessages\");\n            try {\n                if (!window || window.closed || !event.source) return;\n            } catch (err) {\n                return;\n            }\n            var source = event.source, origin = event.origin;\n            var message = function(message, source, origin, _ref) {\n                var on = _ref.on, send = _ref.send;\n                var parsedMessage;\n                try {\n                    parsedMessage = deserializeMessage(source, origin, message, {\n                        on: on,\n                        send: send\n                    });\n                } catch (err) {\n                    return;\n                }\n                if (parsedMessage && \"object\" == typeof parsedMessage && null !== parsedMessage && (parsedMessage = parsedMessage.__post_robot_10_0_37__) && \"object\" == typeof parsedMessage && null !== parsedMessage && parsedMessage.type && \"string\" == typeof parsedMessage.type && RECEIVE_MESSAGE_TYPES[parsedMessage.type]) return parsedMessage;\n            }(event.data, source, origin, {\n                on: on,\n                send: send\n            });\n            if (message) {\n                markWindowKnown(source);\n                if (!receivedMessages.has(message.id)) {\n                    receivedMessages.set(message.id, !0);\n                    if (!isWindowClosed(source) || message.fireAndForget) {\n                        0 === message.origin.indexOf(\"file:\") && (origin = \"file://\");\n                        RECEIVE_MESSAGE_TYPES[message.type](source, origin, message, {\n                            on: on,\n                            send: send\n                        });\n                    }\n                }\n            }\n        }\n        function on_on(name, options, handler) {\n            if (!name) throw new Error(\"Expected name\");\n            if (\"function\" == typeof options) {\n                handler = options;\n                options = {};\n            }\n            if (!handler) throw new Error(\"Expected handler\");\n            (options = options || {}).name = name;\n            options.handler = handler || options.handler;\n            var win = options.window;\n            var domain = options.domain;\n            var requestListener = function addRequestListener(_ref4, listener) {\n                var name = _ref4.name, win = _ref4.win, domain = _ref4.domain;\n                var requestListeners = windowStore(\"requestListeners\");\n                if (!name || \"string\" != typeof name) throw new Error(\"Name required to add request listener\");\n                if (Array.isArray(win)) {\n                    var listenersCollection = [];\n                    for (var _i8 = 0, _win2 = win; _i8 < _win2.length; _i8++) listenersCollection.push(addRequestListener({\n                        name: name,\n                        domain: domain,\n                        win: _win2[_i8]\n                    }, listener));\n                    return {\n                        cancel: function() {\n                            for (var _i10 = 0; _i10 < listenersCollection.length; _i10++) listenersCollection[_i10].cancel();\n                        }\n                    };\n                }\n                if (Array.isArray(domain)) {\n                    var _listenersCollection = [];\n                    for (var _i12 = 0, _domain2 = domain; _i12 < _domain2.length; _i12++) _listenersCollection.push(addRequestListener({\n                        name: name,\n                        win: win,\n                        domain: _domain2[_i12]\n                    }, listener));\n                    return {\n                        cancel: function() {\n                            for (var _i14 = 0; _i14 < _listenersCollection.length; _i14++) _listenersCollection[_i14].cancel();\n                        }\n                    };\n                }\n                var existingListener = getRequestListener({\n                    name: name,\n                    win: win,\n                    domain: domain\n                });\n                win && \"*\" !== win || (win = getWildcard());\n                domain = domain || \"*\";\n                if (existingListener) throw win && domain ? new Error(\"Request listener already exists for \" + name + \" on domain \" + domain.toString() + \" for \" + (win === getWildcard() ? \"wildcard\" : \"specified\") + \" window\") : win ? new Error(\"Request listener already exists for \" + name + \" for \" + (win === getWildcard() ? \"wildcard\" : \"specified\") + \" window\") : domain ? new Error(\"Request listener already exists for \" + name + \" on domain \" + domain.toString()) : new Error(\"Request listener already exists for \" + name);\n                var nameListeners = requestListeners.getOrSet(win, (function() {\n                    return {};\n                }));\n                var domainListeners = util_getOrSet(nameListeners, name, (function() {\n                    return {};\n                }));\n                var strDomain = domain.toString();\n                var regexListeners;\n                var regexListener;\n                util_isRegex(domain) ? (regexListeners = util_getOrSet(domainListeners, \"__domain_regex__\", (function() {\n                    return [];\n                }))).push(regexListener = {\n                    regex: domain,\n                    listener: listener\n                }) : domainListeners[strDomain] = listener;\n                return {\n                    cancel: function() {\n                        delete domainListeners[strDomain];\n                        if (regexListener) {\n                            regexListeners.splice(regexListeners.indexOf(regexListener, 1));\n                            regexListeners.length || delete domainListeners.__domain_regex__;\n                        }\n                        Object.keys(domainListeners).length || delete nameListeners[name];\n                        win && !Object.keys(nameListeners).length && requestListeners.del(win);\n                    }\n                };\n            }({\n                name: name,\n                win: win,\n                domain: domain\n            }, {\n                handler: options.handler,\n                handleError: options.errorHandler || function(err) {\n                    throw err;\n                },\n                window: win,\n                domain: domain || \"*\",\n                name: name\n            });\n            return {\n                cancel: function() {\n                    requestListener.cancel();\n                }\n            };\n        }\n        function on_once(name, options, handler) {\n            if (\"function\" == typeof (options = options || {})) {\n                handler = options;\n                options = {};\n            }\n            var promise = new promise_ZalgoPromise;\n            var listener;\n            options.errorHandler = function(err) {\n                listener.cancel();\n                promise.reject(err);\n            };\n            listener = on_on(name, options, (function(event) {\n                listener.cancel();\n                promise.resolve(event);\n                if (handler) return handler(event);\n            }));\n            promise.cancel = listener.cancel;\n            return promise;\n        }\n        var send_send = function send(win, name, data, options) {\n            var domain = (options = options || {}).domain || \"*\";\n            var responseTimeout = options.timeout || -1;\n            var childTimeout = options.timeout || 5e3;\n            var fireAndForget = options.fireAndForget || !1;\n            return promise_ZalgoPromise.try((function() {\n                !function(name, win, domain) {\n                    if (!name) throw new Error(\"Expected name\");\n                    if (domain && \"string\" != typeof domain && !Array.isArray(domain) && !util_isRegex(domain)) throw new TypeError(\"Can not send \" + name + \". Expected domain \" + JSON.stringify(domain) + \" to be a string, array, or regex\");\n                    if (isWindowClosed(win)) throw new Error(\"Can not send \" + name + \". Target window is closed\");\n                }(name, win, domain);\n                if (function(parent, child) {\n                    var actualParent = getAncestor(child);\n                    if (actualParent) return actualParent === parent;\n                    if (child === parent) return !1;\n                    if (function(win) {\n                        void 0 === win && (win = window);\n                        try {\n                            if (win.top) return win.top;\n                        } catch (err) {}\n                        if (getParent(win) === win) return win;\n                        try {\n                            if (isAncestorParent(window, win) && window.top) return window.top;\n                        } catch (err) {}\n                        try {\n                            if (isAncestorParent(win, window) && window.top) return window.top;\n                        } catch (err) {}\n                        for (var _i7 = 0, _getAllChildFrames4 = function getAllChildFrames(win) {\n                            var result = [];\n                            for (var _i3 = 0, _getFrames2 = getFrames(win); _i3 < _getFrames2.length; _i3++) {\n                                var frame = _getFrames2[_i3];\n                                result.push(frame);\n                                for (var _i5 = 0, _getAllChildFrames2 = getAllChildFrames(frame); _i5 < _getAllChildFrames2.length; _i5++) result.push(_getAllChildFrames2[_i5]);\n                            }\n                            return result;\n                        }(win); _i7 < _getAllChildFrames4.length; _i7++) {\n                            var frame = _getAllChildFrames4[_i7];\n                            try {\n                                if (frame.top) return frame.top;\n                            } catch (err) {}\n                            if (getParent(frame) === frame) return frame;\n                        }\n                    }(child) === child) return !1;\n                    for (var _i15 = 0, _getFrames8 = getFrames(parent); _i15 < _getFrames8.length; _i15++) if (_getFrames8[_i15] === child) return !0;\n                    return !1;\n                }(window, win)) return function(win, timeout, name) {\n                    void 0 === timeout && (timeout = 5e3);\n                    void 0 === name && (name = \"Window\");\n                    var promise = function(win) {\n                        return windowStore(\"helloPromises\").getOrSet(win, (function() {\n                            return new promise_ZalgoPromise;\n                        }));\n                    }(win);\n                    -1 !== timeout && (promise = promise.timeout(timeout, new Error(name + \" did not load after \" + timeout + \"ms\")));\n                    return promise;\n                }(win, childTimeout);\n            })).then((function(_temp) {\n                return function(win, targetDomain, actualDomain, _ref) {\n                    var send = _ref.send;\n                    return \"string\" == typeof targetDomain ? promise_ZalgoPromise.resolve(targetDomain) : promise_ZalgoPromise.try((function() {\n                        return actualDomain || sayHello(win, {\n                            send: send\n                        }).then((function(_ref2) {\n                            return _ref2.domain;\n                        }));\n                    })).then((function(normalizedDomain) {\n                        if (!matchDomain(targetDomain, targetDomain)) throw new Error(\"Domain \" + stringify(targetDomain) + \" does not match \" + stringify(targetDomain));\n                        return normalizedDomain;\n                    }));\n                }(win, domain, (void 0 === _temp ? {} : _temp).domain, {\n                    send: send\n                });\n            })).then((function(targetDomain) {\n                domain = targetDomain;\n                var logName = \"postrobot_method\" === name && data && \"string\" == typeof data.name ? data.name + \"()\" : name;\n                var promise = new promise_ZalgoPromise;\n                var hash = name + \"_\" + uniqueID();\n                if (!fireAndForget) {\n                    var responseListener = {\n                        name: name,\n                        win: win,\n                        domain: domain,\n                        promise: promise\n                    };\n                    !function(hash, listener) {\n                        globalStore(\"responseListeners\").set(hash, listener);\n                    }(hash, responseListener);\n                    var reqPromises = windowStore(\"requestPromises\").getOrSet(win, (function() {\n                        return [];\n                    }));\n                    reqPromises.push(promise);\n                    promise.catch((function() {\n                        !function(hash) {\n                            globalStore(\"erroredResponseListeners\").set(hash, !0);\n                        }(hash);\n                        deleteResponseListener(hash);\n                    }));\n                    var totalAckTimeout = function(win) {\n                        return windowStore(\"knownWindows\").get(win, !1);\n                    }(win) ? 1e4 : 2e3;\n                    var totalResTimeout = responseTimeout;\n                    var ackTimeout = totalAckTimeout;\n                    var resTimeout = totalResTimeout;\n                    var interval = function(method, time) {\n                        var timeout;\n                        !function loop() {\n                            timeout = setTimeout((function() {\n                                !function() {\n                                    if (isWindowClosed(win)) return promise.reject(new Error(\"Window closed for \" + name + \" before \" + (responseListener.ack ? \"response\" : \"ack\")));\n                                    if (responseListener.cancelled) return promise.reject(new Error(\"Response listener was cancelled for \" + name));\n                                    ackTimeout = Math.max(ackTimeout - 500, 0);\n                                    -1 !== resTimeout && (resTimeout = Math.max(resTimeout - 500, 0));\n                                    responseListener.ack || 0 !== ackTimeout ? 0 === resTimeout && promise.reject(new Error(\"No response for postMessage \" + logName + \" in \" + getDomain() + \" in \" + totalResTimeout + \"ms\")) : promise.reject(new Error(\"No ack for postMessage \" + logName + \" in \" + getDomain() + \" in \" + totalAckTimeout + \"ms\"));\n                                }();\n                                loop();\n                            }), 500);\n                        }();\n                        return {\n                            cancel: function() {\n                                clearTimeout(timeout);\n                            }\n                        };\n                    }();\n                    promise.finally((function() {\n                        interval.cancel();\n                        reqPromises.splice(reqPromises.indexOf(promise, 1));\n                    })).catch(src_util_noop);\n                }\n                try {\n                    send_sendMessage(win, domain, {\n                        type: \"postrobot_message_request\",\n                        hash: hash,\n                        name: name,\n                        data: data,\n                        fireAndForget: fireAndForget\n                    }, {\n                        on: on_on,\n                        send: send\n                    });\n                } catch (err) {\n                    throw new Error(\"Send request message failed for \" + logName + \" in \" + getDomain() + \"\\n\\n\" + stringifyError(err));\n                }\n                return fireAndForget ? promise.resolve() : promise;\n            }));\n        };\n        function setup_serializeMessage(destination, domain, obj) {\n            return serializeMessage(destination, domain, obj, {\n                on: on_on,\n                send: send_send\n            });\n        }\n        function setup_deserializeMessage(source, origin, message) {\n            return deserializeMessage(source, origin, message, {\n                on: on_on,\n                send: send_send\n            });\n        }\n        function createProxyWindow(win) {\n            return new window_ProxyWindow({\n                send: send_send,\n                win: win\n            });\n        }\n        function setup_toProxyWindow(win) {\n            return window_ProxyWindow.toProxyWindow(win, {\n                send: send_send\n            });\n        }\n        function setup() {\n            if (!global_getGlobal().initialized) {\n                global_getGlobal().initialized = !0;\n                on = (_ref3 = {\n                    on: on_on,\n                    send: send_send\n                }).on, send = _ref3.send, (global = global_getGlobal()).receiveMessage = global.receiveMessage || function(message) {\n                    return receive_receiveMessage(message, {\n                        on: on,\n                        send: send\n                    });\n                };\n                !function(_ref5) {\n                    var on = _ref5.on, send = _ref5.send;\n                    globalStore().getOrSet(\"postMessageListener\", (function() {\n                        return function(obj, event, handler) {\n                            obj.addEventListener(\"message\", handler);\n                            return {\n                                cancel: function() {\n                                    obj.removeEventListener(\"message\", handler);\n                                }\n                            };\n                        }(window, 0, (function(event) {\n                            !function(event, _ref4) {\n                                var on = _ref4.on, send = _ref4.send;\n                                var source = event.source || event.sourceElement;\n                                var origin = event.origin || event.originalEvent && event.originalEvent.origin;\n                                var data = event.data;\n                                \"null\" === origin && (origin = \"file://\");\n                                if (source) {\n                                    if (!origin) throw new Error(\"Post message did not have origin domain\");\n                                    receive_receiveMessage({\n                                        source: source,\n                                        origin: origin,\n                                        data: data\n                                    }, {\n                                        on: on,\n                                        send: send\n                                    });\n                                }\n                            }(event, {\n                                on: on,\n                                send: send\n                            });\n                        }));\n                    }));\n                }({\n                    on: on_on,\n                    send: send_send\n                });\n                !function(_ref8) {\n                    var on = _ref8.on, send = _ref8.send;\n                    globalStore(\"builtinListeners\").getOrSet(\"helloListener\", (function() {\n                        var listener = on(\"postrobot_hello\", {\n                            domain: \"*\"\n                        }, (function(_ref3) {\n                            resolveHelloPromise(_ref3.source, {\n                                domain: _ref3.origin\n                            });\n                            return {\n                                instanceID: getInstanceID()\n                            };\n                        }));\n                        var parent = getAncestor();\n                        parent && sayHello(parent, {\n                            send: send\n                        }).catch(src_util_noop);\n                        return listener;\n                    }));\n                }({\n                    on: on_on,\n                    send: send_send\n                });\n            }\n            var _ref3, on, send, global;\n        }\n        function destroy() {\n            !function() {\n                var responseListeners = globalStore(\"responseListeners\");\n                for (var _i2 = 0, _responseListeners$ke2 = responseListeners.keys(); _i2 < _responseListeners$ke2.length; _i2++) {\n                    var hash = _responseListeners$ke2[_i2];\n                    var listener = responseListeners.get(hash);\n                    listener && (listener.cancelled = !0);\n                    responseListeners.del(hash);\n                }\n            }();\n            (listener = globalStore().get(\"postMessageListener\")) && listener.cancel();\n            var listener;\n            delete window.__post_robot_10_0_37__;\n        }\n        var src_types_TYPES_0 = !0;\n        function cleanUpWindow(win) {\n            for (var _i2 = 0, _requestPromises$get2 = windowStore(\"requestPromises\").get(win, []); _i2 < _requestPromises$get2.length; _i2++) _requestPromises$get2[_i2].reject(new Error(\"Window \" + (isWindowClosed(win) ? \"closed\" : \"cleaned up\") + \" before response\")).catch(src_util_noop);\n        }\n        setup();\n    } ]);\n}));","/* @flow */\n\n// eslint-disable-next-line import/no-commonjs\nmodule.exports = require('./dist/post-robot');\n\n// eslint-disable-next-line import/no-commonjs\nmodule.exports.default = module.exports;\n","import { useState, useEffect, useRef } from 'react'\nimport postRobot, { ServerOptionsType, WindowResolverType } from 'post-robot'\n\ntype TargetOrigin = {\n  window: WindowResolverType\n} & ServerOptionsType\n\nexport const useCorsState = (synchronizingKey: string, targetOrigin: TargetOrigin = { window }, initialValue: any) => {\n  const [state, setState] = useState(initialValue)\n  const sendable = useRef<boolean>(true)\n\n  useEffect(() => {\n    const literner = postRobot.on(synchronizingKey, targetOrigin, ({ data }) => {\n      sendable.current = false\n      setState(data)\n    })\n    return () => literner.cancel()\n  }, [synchronizingKey, targetOrigin])\n\n  useEffect(() => {\n    sendable.current && postRobot.send(targetOrigin.window, synchronizingKey, state)\n    sendable.current = true\n  }, [state, synchronizingKey, targetOrigin.window])\n\n  return [state, setState]\n}\n"],"sourceRoot":""}